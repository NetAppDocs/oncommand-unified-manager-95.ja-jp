---
permalink: health-checker/task-identifying-the-problem-and-performing-corrective-actions-for-a-failed-protection-job.html 
sidebar: sidebar 
keywords:  
summary: 原因の詳細ページでジョブエラーのエラーメッセージを確認し、 Snapshot コピーのエラーが原因でジョブが失敗したことを確認します。その後、健常性/ボリュームの詳細ページに進み、詳細情報を収集します。 
---
= 保護ジョブが失敗した場合の問題の特定と対処策の実施
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
原因の詳細ページでジョブエラーのエラーメッセージを確認し、 Snapshot コピーのエラーが原因でジョブが失敗したことを確認します。その後、健常性/ボリュームの詳細ページに進み、詳細情報を収集します。



== 作業を開始する前に

OnCommand 管理者のロールが必要です。



== このタスクについて

イベントの詳細ページの原因フィールドに表示されるエラーメッセージには、失敗したジョブに関する次のテキストが含まれています。

[listing]
----
Protection Job Failed. Reason: (Transfer operation for
relationship 'cluster2_src_svm:cluster2_src_vol2->cluster3_dst_svm:
managed_svc2_vol3' ended unsuccessfully. Last error reported by
Data ONTAP: Failed to create Snapshot copy 0426cluster2_src_vol2snap
on volume cluster2_src_svm:cluster2_src_vol2. (CSM: An operation
failed due to an ONC RPC failure.).)
*Job Details*
----
このメッセージには次の情報が表示されます。

* バックアップジョブまたはミラージョブが正常に完了しませんでした。
+
ジョブにソースボリューム間の保護関係が関係しています `cluster2_src_vol2` 仮想サーバ `cluster2_src_svm` デスティネーションボリュームを指定します `managed_svc2_vol3` という名前の仮想サーバ上にある `cluster3_dst_svm`。

* に対するSnapshotコピージョブが失敗しました `0426cluster2_src_vol2snap` ソースボリューム `cluster2_src_svm:/cluster2_src_vol2`。


このシナリオでは、ジョブが失敗した場合の原因と潜在的な対処策を特定できます。ただし、失敗を解決するには、 System Manager Web UI または ONTAP CLI コマンドを使用する必要があります。



== 手順

. エラーメッセージを確認し、ソースボリュームで Snapshot コピージョブが失敗していることから、おそらくソースボリュームに問題があると判断します。
+
必要に応じて、エラーメッセージの最後にある * Job Details * リンクをクリックしてもかまいませんが、このシナリオでは、そのような操作を行わないように選択します。

. イベントを解決するために、次の作業を行います。
+
.. [* Assign to * （ * への割り当て） ] ボタンをクリックし、メニューから [* Me* （ * Me * ） ] を選択します
.. [* Acknowledge * （確認） ] ボタンをクリックして、イベントにアラートが設定されている場合は、繰り返しアラート通知を受信しないようにします。
.. 必要に応じて、イベントに関するメモを追加することもできます。


. [Summary] * ペインで [Source] * フィールドをクリックして、ソース・ボリュームの詳細を表示します。
+
「 * Source * 」フィールドには、ソースオブジェクトの名前が表示されます。この場合は、 Snapshot コピージョブがスケジュールされたボリュームが表示されます。

+
の健常性/ボリュームの詳細ページが表示されます `cluster2_src_vol2`をクリックすると、Protectionタブの内容が表示されます。

. 保護トポロジのグラフを見ると、トポロジ内の最初のボリューム（ SnapMirror 関係のソースボリューム）に関連付けられているエラーアイコンが表示されます。
+
また、ソースボリュームアイコンに水平のバーが表示され、そのボリュームに設定されている警告とエラーのしきい値が示されます。

+
image::../media/um-topology-cascade-job-failure.gif[ジョブ障害カスケードトポロジ]

. エラーアイコンにカーソルを合わせると、ポップアップダイアログが開いてしきい値の設定が表示され、ボリュームがエラーしきい値を超えて容量の問題を示していることがわかります。
. [ 容量 * ] タブをクリックします。
+
ボリュームの容量情報 `cluster2_src_vol2` を表示します。

. 容量*ペインの棒グラフに、ボリュームの容量がボリュームに設定されたしきい値のレベルを超えたことを示すエラーアイコンが再び表示されます。
. 容量グラフの下には、ボリュームの自動拡張が無効になっていることと、ボリュームのスペースギャランティが設定されていることが示されています。
+
自動拡張を有効にすることもできますが、このシナリオの目的上、さらに調査を進めてから、容量の問題を解決する方法を決定することにします。

. 下にスクロールして「 * Events 」リストを表示し、「 Protection Job Failed 」、「 Volume Days Until Full 」、「 Volume Space Full 」の各イベントが生成されたことを確認します。
. イベントのリストで、「 * ボリュームスペースがフル * 」イベントをクリックして詳細を確認します。このイベントは容量問題に最も関連しているように見えます。
+
イベントの詳細ページには、ソースボリュームで「ボリュームスペースがフル」イベントが表示されます。

. [サマリー*（Summary *）]領域で、イベントの[プロパティ（原因 ）]フィールドを確認します。 `The full threshold set at 90% is breached. 45.38 MB (95.54%) of 47.50 MB is used.`
. サマリ*領域の下に推奨される対処方法が表示されます。
+
[TIP]
====
Suggested Corrective Actions は一部のイベントについてのみ表示されるため、すべてのタイプのイベントについてこの領域が表示されるわけではありません。

====
+
「ボリュームスペースがフル」イベントを解決するために実施する推奨対処策をクリックしていきます。

+
** このボリュームで自動拡張を有効にします。
** ボリュームのサイズを変更する。
** このボリュームで重複排除を有効にして実行する。
** このボリュームで圧縮を有効にして実行する。


. ボリュームの自動拡張を有効にすることにしましたが、これを行うには、親アグリゲート上の使用可能な空きスペースと現在のボリューム増加率を確認する必要があります。
+
.. 親アグリゲートを確認します。 `cluster2_src_aggr1`をクリックします。
+
[TIP]
====
アグリゲートの名前をクリックすると、アグリゲートに関する詳細を確認できます。

====
+
ボリュームに自動拡張を有効にするための十分なスペースがあることを確認します。

.. ページの上部で、重要なインシデントを示すアイコンを確認し、アイコンの下のテキストを確認します。
+
「フルまでの日数： 1 日未満 | 日次増加率： 5.4% 」と指定します。



. System ManagerまたはONTAP CLIにアクセスしてを有効にします `volume autogrow` オプション
+
[TIP]
====
ボリュームとアグリゲートの名前をメモしておいて、自動拡張を有効にするときに参照できるようにします。

====
. 容量問題 を解決したら、Unified Managerの**イベント**の詳細ページに戻って、イベントを解決済みとマークします。

