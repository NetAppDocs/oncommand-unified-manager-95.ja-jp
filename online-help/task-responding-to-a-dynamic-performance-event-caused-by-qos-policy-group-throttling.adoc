---
permalink: online-help/task-responding-to-a-dynamic-performance-event-caused-by-qos-policy-group-throttling.html 
sidebar: sidebar 
keywords:  
summary: Unified Managerを使用して、ワークロードのスループット（MBps）を調整しているサービス品質（QoS）ポリシーグループが原因のパフォーマンスイベントを調査できます。この調整によって、ポリシーグループ内のボリュームワークロードの応答時間が増加しました。イベント情報を使用して、ポリシーグループに新しい制限値を設定して調整を停止する必要があるかどうかを判断できます。 
---
= QoS ポリシーグループの調整が原因の動的なパフォーマンスイベントへの対処
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
Unified Managerを使用して、ワークロードのスループット（MBps）を調整しているサービス品質（QoS）ポリシーグループが原因のパフォーマンスイベントを調査できます。この調整によって、ポリシーグループ内のボリュームワークロードの応答時間（レイテンシ）が増加します。イベント情報を使用して、ポリシーグループに新しい制限値を設定して調整を停止する必要があるかどうかを判断できます。



== 作業を開始する前に

* オペレータ、OnCommand 管理者、またはストレージ管理者のロールが必要です。
* 新規、確認済み、または廃止状態のパフォーマンスイベントが存在する必要があります。




== 手順

. イベントの詳細情報を表示するには、イベントの詳細 * ページを表示します。
. 概要 * を確認します。スロットルの影響を受けるワークロードの名前が表示されます。
+
[NOTE]
====
調整の結果、あるワークロードは自身の Victim になるため、概要には Victim と Bully に同じワークロードが表示されることがあります。

====
. テキストエディタなどのアプリケーションを使用して、ボリュームの名前を記録します。
+
あとでボリューム名で検索できます。

. ワークロードレイテンシ / ワークロードアクティビティのグラフで、「 * Bully workloads * 」を選択します。
. グラフにカーソルを合わせると、ポリシーグループに影響を与えている上位のユーザ定義ワークロードが表示されます。
+
偏差が最も大きく、調整の原因となったワークロードがリストの最上位に表示されます。アクティビティは、ポリシーグループ制限に対して各ワークロードが使用している割合です。

. 上位のワークロードの「パフォーマンス/ボリュームの詳細」ページに移動します。
. [*データを次の単位でブレークダウンする]を選択します。
. *** Latency ***の横にあるチェックボックスをオンにして、すべてのレイテンシ内訳グラフを選択します。
. [*IOPS*]で、[***読み取り/書き込み/その他]を選択します。
. [Submit （送信） ] をクリックします。
+
内訳グラフは、レイテンシグラフと IOPS グラフの下に表示されます。

. 「* Policy Group Impact」グラフと「* Latency *」グラフを比較して、調整の何パーセントがイベント発生時にレイテンシに影響したかを確認します。
+
ポリシーグループの最大スループットが1秒あたり1、000op/secの場合、ポリシーグループ内のワークロードの合計がこの値を超えることはできません。イベント発生時、ポリシーグループ内のワークロードの合計スループットが 1 、 200op/sec を超えたため、ポリシーグループのアクティビティが 1 、 000op/sec に調整されましたPolicy Group Impactグラフは、調整が合計レイテンシの10%を引き起こしたことを示しており、調整が原因でイベントが発生したことを示しています。

. クラスタコンポーネント別の合計レイテンシを示す* Cluster Components *チャートを確認します。
+
レイテンシが最も高いのはポリシーグループで、調整が原因でイベントが発生したことを確認できます。

. 読み取り/書き込みレイテンシ*のグラフと、読み取り/書き込みレイテンシ/その他*のグラフを比較します。
+
どちらのグラフでも、レイテンシが高い読み取り要求が多数ある一方で、書き込み要求の数は少なくレイテンシも低くなっています。これらの値から、レイテンシを増加させた大量のスループットまたは処理の有無を判断できます。これらの値は、スループットまたは処理数にポリシーグループの制限を設定するかどうかを決定する際に使用できます。

. OnCommand システムマネージャを使用して、ポリシーグループの現在の制限値を1、300op/secに増やします
. 1日後、手順3で記録したワークロードの名前をUnified Managerで検索します。
+
パフォーマンス/ボリュームの詳細ページが表示されます。

. 「*ブレークダウン・データ・バイ*>*** IOPS***」を選択します。
. [Submit （送信） ] をクリックします。
+
読み取り / 書き込み / その他のグラフが表示されます。

. ページの下部で、変更イベントのアイコン（image:../media/opm-change-icon.gif["変更イベントアイコン"]）をクリックします。
. 読み取り / 書き込み / その他 * のグラフを * Latency * のグラフと比較します。
+
読み取り要求と書き込み要求は同じですが、調整は停止し、レイテンシは低下しています。


